Учебный проект в Yandex practicum - приложение-магазин

Использовал эндпоинты из предоставленный темплайтов, для имторта товаров используется endpoint /import 

В качестве корзины я использовал заказ со статусом NEW.

Добавил количество доступных товаров и проверку на превышение этого кол-ва при добавлении в корзину/покупке товара 

Используется БД postgresql для прода и h2 для тестов

Изображения хранятся в файловой системе, путь к директории задается параметром {spring.images.location} в application.properties.

Добавил простейший ExceptionHandler для логгирования ошибок

Для запуска в docker использовал команду docker-compose up --build

-----------------------------------------------------------------------------

v.2.0

Перевел на Spring WebFlux и Spring Data R2DBC

Добавил DTO для оптимизации и безопасности (в данном случае никаких чуствительных данных в Entity нет, но тем не менее), для запроса из БД списка товаров с количеством товаров в заказе использую кастомный репозиторий

Как сделать импорт из файла в реактивном стиле я не придумал, но я не уверен что в данном случае он нужен

Покупку корзины я сделал последовательными запросами к БД - получение корзины, получение списка товаров в корзине и получение кол-ва товаров в магазине для каждого товара. 

Рассматривал альтернативные варианты: приджойнить кол-во товара в магазине в OrderGoods (но это количество мне нужно не всегда, так что такой джойн замедлит остальные операции с OrderGoods) или сделать новую сущность (например OrderGoodsDTO), приджойнить кол-во в нее и использовать эту сущность только при покупке корзины, не стал так как это еще одна лишняя сущность.

Буду признателен, если в ревью укажите, какой вариант в данном случае предпочтительный.

--------------------------------------------------------------------------------

v.3.0

Добавил кэширование

Добавил эмуляцию платежа

Не получилось сгенерировать клиентскую часть как бин, создаю объекты вручную.

---------------------------------------------------------------------------------

v.4.0

Добавил Spring Security

Авторизацию между основным приложением и сервисом платежей сделал через keycloak

Для авторизации в основное приложение использую стандартные эндпоинты /login и /logout

Для регистрации нового пользователя использую /register

Экран для администрирования пользователей не сделал, роль админа добавляю через БД

Не придумал как убрать это все в docker, так как надо вручную настраивать keycloak

